<?xml version="1.0" encoding="UTF-8"?>
<addons>
    <!-- Fan Vod PL video plugin -->
    <addon id="plugin.video.fanvodpl"
           name="Fan Vod PL"
           version="1.0.0"
           provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
            <!-- Require the PTW module so Kodi will pull it in automatically -->
            <import addon="script.module.ptw" version="2025.08.17"/>
            <import addon="script.module.requests"/>
            <import addon="script.module.metahandler" version="5.0.0"/>
            <import addon="script.module.beautifulsoup4"/>
            <import addon="script.module.future"/>
            <import addon="plugin.video.youtube" optional="true"/>
            <import addon="script.module.resolveurl"/>
            <import addon="script.module.six"/>
            <import addon="script.module.kodi-six"/>
            <import addon="script.module.kover" version="0.0.6"/>
            <!-- The original FanFilm fork referenced two internal FanFilm modules. They are not required
                 for core functionality in this fork and are not provided in this repository, so mark
                 both as optional to avoid missing dependency errors in Kodi. -->
            <import addon="script.fanfilm.media" version="2022.12.29.0" optional="true"/>
            <import addon="script.fanfilm.metadata" version="2021.03.07.0" optional="true"/>
        </requires>

        <!-- Register the main plugin entry point -->
        <extension point="xbmc.python.pluginsource" library="default.py">
            <provides>video</provides>
        </extension>

        <!-- Start background service on Kodi startup -->
        <extension point="xbmc.service" library="service.py" start="startup"/>

        <!-- Add context menu item for searching within the TV guide -->
        <extension point="kodi.context.item">
          <menu id="kodi.core.main">
            <item library="epg.py">
              <label lang="pl">Szukaj w Fan Vod PL</label>
              <visible>Window.IsVisible(tvguide)|Window.IsVisible(tvsearch)|Window.IsVisible(tvchannels)</visible>
            </item>
          </menu>
        </extension>

        <!-- Metadata describing the add-on -->
        <extension point="xbmc.addon.metadata">
            <reuselanguageinvoker>true</reuselanguageinvoker>
            <summary lang="pl">Fan Vod PL</summary>
            <description lang="pl">Plugin z filmami i serialami (fork FanFilm).</description>
            <platform>all</platform>
            <assets>
                <icon>icon.png</icon>
                <fanart>fanart.jpg</fanart>
                <thumb>resources/media/icon-about.png</thumb>
            </assets>
        </extension>
    </addon>

    <!-- PTW helper module -->
    <addon id="script.module.ptw" name="PTW Module" version="2025.08.17" provider-name="PTW(gpt)">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
            <import addon="script.module.beautifulsoup4"/>
            <import addon="script.module.requests"/>
            <import addon="script.module.resolveurl"/>
            <import addon="script.module.six"/>
            <import addon="script.module.kodi-six"/>
            <import addon="script.module.pyxbmct"/>
            <import addon="script.module.future"/>
            <import addon="script.module.js2py" version="0.7.0"/>
            <import addon="plugin.video.youtube" optional="true"/>
            <import addon="script.module.kover" version="0.0.6"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <platform>all</platform>
            <summary lang="en">PTW</summary>
        </extension>
    </addon>

    <!-- js2py stub module to satisfy dependency -->
    <addon id="script.module.js2py" name="js2py (stub)" version="0.7.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">Stub for js2py</summary>
            <description lang="en">Stub module to satisfy dependency for PTW; not full js2py functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <!-- kover stub module to satisfy dependency -->
    <addon id="script.module.kover" name="kover (stub)" version="0.0.6" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">Stub for kover</summary>
            <description lang="en">Stub module to satisfy dependency for PTW; not full kover functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <!-- metahandler stub module to satisfy dependency -->
    <addon id="script.module.metahandler" name="metahandler (stub)" version="5.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">Stub for metahandler</summary>
            <description lang="en">Stub module to satisfy dependency for Fan Vod PL; not full metahandler functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <!-- pyxbmct stub module to satisfy dependency -->
    <addon id="script.module.pyxbmct" name="pyxbmct (stub)" version="1.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">Stub for pyxbmct</summary>
            <description lang="en">Stub module to satisfy dependency for PTW; not full pyxbmct functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <!-- Repository add-on definition -->
    <addon id="repository.fanvodpl" name="Fan Vod PL Repo" version="1.0.0" provider-name="gpt">
        <extension point="xbmc.addon.repository">
            <!-- Wrap the repository information inside a <dir> element as required for Kodi 21+ -->
            <dir>
                <info>https://ffmodgpt5.github.io/Fan-Vod-Pl/FanVodRepo/addons.xml</info>
                <checksum>https://ffmodgpt5.github.io/Fan-Vod-Pl/FanVodRepo/addons.xml.md5</checksum>
                <datadir>https://ffmodgpt5.github.io/Fan-Vod-Pl/FanVodRepo/zips/</datadir>
            </dir>
        </extension>
        <extension point="xbmc.addon.metadata">
            <summary lang="pl">Repozytorium Fan Vod PL</summary>
            <description lang="pl">Repozytorium z wtyczką Fan Vod PL i modułem PTW.</description>
            <platform>all</platform>
            <assets>
                <icon>icon.png</icon>
                <fanart>fanart.jpg</fanart>
            </assets>
        </extension>
    </addon>
    <addon id="script.module.requests" name="requests (stub)" version="1.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">requests (stub)</summary>
            <description lang="en">Stub module to satisfy dependency; no real functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <addon id="script.module.beautifulsoup4" name="beautifulsoup4 (stub)" version="1.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">beautifulsoup4 (stub)</summary>
            <description lang="en">Stub module to satisfy dependency; no real functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <addon id="script.module.future" name="future (stub)" version="1.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">future (stub)</summary>
            <description lang="en">Stub module to satisfy dependency; no real functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <addon id="script.module.resolveurl" name="resolveurl (stub)" version="1.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">resolveurl (stub)</summary>
            <description lang="en">Stub module to satisfy dependency; no real functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <addon id="script.module.six" name="six (stub)" version="1.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">six (stub)</summary>
            <description lang="en">Stub module to satisfy dependency; no real functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
    <addon id="script.module.kodi-six" name="kodi-six (stub)" version="1.0.0" provider-name="gpt">
        <requires>
            <import addon="xbmc.python" version="3.0.0"/>
        </requires>
        <extension point="xbmc.python.module" library="lib"/>
        <extension point="xbmc.addon.metadata">
            <summary lang="en">kodi-six (stub)</summary>
            <description lang="en">Stub module to satisfy dependency; no real functionality.</description>
            <platform>all</platform>
        </extension>
    </addon>
</addons>